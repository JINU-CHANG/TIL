클린 코드(Clean code) 책의 클래스 파트를 읽다가 결합도, 응집도의 개념이 자주 언급되어 정리했다. 좋은 소프트웨어 일수록 모듈의 독립성이 높다고 한다. 그리고 모듈의 독립성은 모듈의 결합도(Coupling)와 응집도(Cohesion)의 기준 단계를 측정한다. 

## 결합도(Coupling)

> 낮은 결합도를 유지하자

결합도는 **모듈간의 상호 의존 정도** 또는 **연관된 관계의 끈끈함 정도**를 의미한다.

결합도가 높은 클래스는 다른 클래스와 연관관계가 끈끈하여 만일 하나의 클래스의 구조를 변경하게 된다며 그와 연관된 클래스들도 모두 변경해야 한다.

결합도가 낮다는 소리는 각 시스템 요소가 다른 요소로부터 그리고 변경으로부터 잘 격리되어 있다는 의미다. 시스템 결합도를 낮추면 **유연성과 재상용성**도 더욱 높아진다.

이는 객체가 **실제 구현이 아니라 역할에 의존**해야 한다는 객체지향 원칙을 보여주며, 객체가 역할에 의존하면 자연스럽게 객체지향의 설계 원칙인 DIP를 따르는 클래스가 나온다. 본질적으로 DIP는 클래스가 상세한 구현이 아니라 추상화에 의존해야 한다는 원칙이다.

### 결합도 예시

Portfolio 클래스는 외부 TokyoStockExchange API를 사용해 포트폴리오 값을 계산한다. 따라서 우리 테스트 코드는 시세 변화에 영향을 받는다. 5분마다 값이 달라지는 API로 테스트 코드를 짜기 쉽지 않다.

따라서 우리는 직접 TokyoStockExchange를 호출하는 대신 StockExchange 라는 인터페이스를 생성한 후 메서드를 선언한다. 실제 구현이 아니라 역할에 의존한 것이다.

```
public interface StockExchange {
    Money currentPrice(String symbol);
}

public Portfolio {
    private StockExchange exchange;
    public Portfolio(StockExchange exchange) {
        this.exchange = exchange;
    }
}
```

## 응집도(Cohesion)

> 응집도는 높이자

클래스는 인스턴스 변수 수가 작아야 한다. 각 클래스 메서드는 클래스 인스턴스 변수를 하나 이상 사용해야 한다. 일반적으로 메서드가 변수를 더 많이 사용할수록 메서드와 클래스는 응집도가 더 높다.

반대로 응집도가 낮은 클래스는 서로 관련 없는 함수나 데이터들이 존재하거나 관련성이 적은 여러 기능들이 서로 다른 목적을 추구하며 산재해 있다.

응집도가 높은 클래스는 기능을 수정할 때 관련 내용이 하나의 모듈에 모여있으므로 코드를 이해하기도 쉽고, 수정한 후 관련 없는 다른 클래스에게 영향을 주지 않아 코드의 유지보수에 유리하다. 이는 단일 책임을 가진 클래스 SRP 원칙과도 연결된다.


* 참고
    * https://inpa.tistory.com/entry/OOP-%F0%9F%92%A0-%EA%B0%9D%EC%B2%B4%EC%9D%98-%EA%B2%B0%ED%95%A9%EB%8F%84-%EC%9D%91%EC%A7%91%EB%8F%84-%EC%9D%98%EB%AF%B8%EC%99%80-%EB%8B%A8%EA%B3%84-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-%EC%89%BD%EA%B2%8C-%EC%A0%95%EB%A6%AC
    * 클린코드

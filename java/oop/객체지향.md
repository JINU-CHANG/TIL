## 객체지향 설계

객체지향 설계의 핵심은 **역할, 책임, 협력**이다.

`어떤 객체도 섬이 아니다` 객체들은 협력하기 위해 존재한다.

**협력**이란 애플리케이션 기능을 구현하기 위해 메시지를 주고받는 객체들 사이의 상호작용을 뜻한다. 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단은 **메시지 전송**이다.

**책임**은 객체가 다른 객체와 협력하기 위해 수행하는 행동이다. 객체들의 협력 안에서 객체들에게 할당하는 행동이 책임이다. 예를 들어, Screening의 책임은 영화를 예매하는 것이며 Movie의 책임은 요금을 계산하는 것이다.

**역할**은 대체 가능한 책임의 집합이다. 할인 요금을 계산하기 위한 정책으로는 AmountDiscountPolicy와 PercentDiscountPolicy가 있다. 이때 두 종류의 객체가 참여하는 협력을 개별적으로 만들어야 할까? 

AmountDiscountPolicy와 PercentDiscountPolicy는 모두 `할인 요금 계산`이라는 동일한 책임을 수행한다. 따라서 동일한 책임을 수행하는 역할을 기반으로 두 개의 협력을 하나로 통합하여 DiscountPolicy를 만들 수 있다. 역할을 이용하면 불필요한 중복 코드를 제거하고 더 유연한 설계가 가능하다.

역할을 구현하는 일반적인 방법으로는 추상 클래스와 인터페이스가 있다. 추상 클래스와 인터페이스는 구체 클래스들이 따라야 하는 책임의 집합을 서술한다.

객체지향 설계란 `올바른 객체에게 올바른 책임을 할당하면서 낮은 결합도와 높은 응집도를 가진 구조를 창조하는 활동`이다.

### 좋은 설계의 기준

**캡슐화**

외부에서 알 필요가 없는 부분을 감춤으로써 대상을 단순화하는 추상화의 한 종류이다. 변경 가능성이 높은 부분을 내부에 숨기고 외부에는 상대적으로 안정적인 부분만 공개함으로써 변경의 여파를 통제할 수 있다.

**응집도**

얼마나 관련 높은 책임들을 할당했는지를 나타낸다. 모듈 내의 요소들이 하나의 목적을 위해 긴밀하게 협력한다면 그 모듈은 높은 응집도를 가진다. 모듈 내의 요소들이 서로 다른 목적을 추구한다면 그 모듈은 낮은 응집도를 가진다.

→ 관련 원칙 : SRP(단일 책임 원칙)

**결합도**

의존성의 정도를 나타내며 다른 모듈에 대해 얼마나 많이 알고 있는지를 나타낸다. 어떤 모듈이 다른 모듈에 대해 너무 자세한 부분까지 알고 있다면 두 모듈은 높은 결합도를 가진다. 어떤 모듈이 다른 모듈에 대해 꼭 필요한 지식만 알고 있다면 두 모듈은 낮은 결합도를 가진다.

### 높은 응집도와 낮은 결합도

응집도가 높을수록 변경의 대상과 범위가 명확해지기 때문에 코드를 변경하기 쉬워진다. 변경으로 인해 수정되는 부분을 파악하기 위해 코드 구석구석을 헤매도 다니거나 여러 모듈을 동시에 수정할 필요가 없다.

결합도가 높을수록 함께 변경해야 하는 모듈의 수가 늘어나기 때문에 변경이 어려워진다. 결합도는 낮게 유지해야 한다.

### 추상화와 다형성

추상화는 핵심적인 부분만 남기고 불필요한 부분을 생략함으로써 복잡성을 극복하는 기법이다. 추상화 과정을 거치면 문맥이 바뀌더라도 변하지 않는 부분만 남게 되고 문맥에 따라 변하는 부분은 생략된다.

다형성은 동일한 메시지에 대해 서로 다르게(다양하게) 반응하는 것이다. 이는 서로 다른 객체가 동일한 책임을 공유한다는 것을 의미한다. 다형성을 구현하기 위해서는 동일한 책임을 역할을 기반으로 추상화할 수 있는데 이러한 특성들을 유기적으로 잘 활용했을 때 변경에 유연한 프로젝트를 만들 수 있고 비로소 객체 지향에 가까운 코드를 작성할 수 있다.

```
자바의 다형성

자바에서는 하나의 타입에 여러 객체를 대입할 수 있게 함으로써 다형성을 프로그램적으로 구현했다.
```

### 객체지향 설계 원칙

[SOLD원칙](SOLID원칙.md)

* 참고 : 객체지향(조영호)